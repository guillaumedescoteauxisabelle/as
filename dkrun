#!/bin/bash
goon=1
. .env &> /dev/null || . _env.sh &> /dev/null || goon=0

if [ "$goon" == 1 ]; then
	dknamearg="--name $containername"
	if [ "$containername" == "" ]; then
		dknamearg=""
	fi
export pwdmountpath=/work
if [ "$custompwdmountpath" == "" ] ; then echo "No special mount path"
else
	pwdmountpath=$custompwdmountpath
fi
_dkport="$dkport"
if [ "$_dkport" != "" ]; then _dkport=" -p $dkport "; fi
_dkport2="$dkport2"
if [ "$_dkport2" != "" ]; then _dkport2=" -p $dkport2 "; fi

echo "Running container : $dockertag $dknamearg $dkextra $dkport $dkport2"
docker run -it --rm $dknamearg $dkextra $dkport $dkport2 \
	-v $(pwd):/$pwdmountpath \
	#-v /home/jgi:/home/jgi \
	-v $binroot:/a/bin \
	-e DISPLAY=$DISPLAY \
	$dockertag $1 
else	
echo "Please define dockertag in .env"
fi
