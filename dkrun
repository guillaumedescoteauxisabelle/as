#!/bin/bash
goon=1
. .env &> /dev/null || . _env.sh &> /dev/null || goon=0

if [ "$goon" == 1 ]; then
	dknamearg="--name $containername"
	if [ "$containername" == "" ]; then
		dknamearg=""
	fi
export pwdmountpath=/work
if [ "$custompwdmountpath" == "" ] ; then echo "No special mount path"
else
	pwdmountpath=$custompwdmountpath
fi

if [ "$dkport" != "" ]; then _dkport=" -p $dkport "; fi

if [ "$dkport2" != "" ]; then _dkport2=" -p $dkport2 "; fi


if [ "$xmount" != "" ]; then _xmount=" -v $xmount "; fi

if [ "$xmount2" != "" ]; then _xmount2=" -v $xmount2 "; fi
echo "Running container : $dockertag $dknamearg $dkextra $_dkport $_dkport2 $_xmount $_xmount2"
cmd="docker run -it --rm $dknamearg $dkextra $_dkport $_dkport2 $_xmount $_xmount2\
	-v $(pwd):/$pwdmountpath \
	-v $binroot:/a/bin \
	-e DISPLAY=$DISPLAY \
	$dockertag $1 "
echo "$cmd"
sleep 1 
$cmd
else	
echo "Please define dockertag in .env"
fi
